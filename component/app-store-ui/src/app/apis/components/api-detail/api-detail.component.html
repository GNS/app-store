<div fxLayout="column" fxLayoutGap="20px" class="api-details-component">

    <div class="intro-container">

        <div class="pull-left">
            <img [src]="apiPrefix + api?.thumbnailUrl" class="api-thumb" *ngIf="api?.thumbnailUrl" />
            <img src="assets/images/apigate-a.png" class="api-thumb" *ngIf="!api?.thumbnailUrl" />
        </div>
        <h1>{{api?.name}} <span class="version" aria-label="API Version">{{api?.version}}</span></h1>
        <div class="status-label" [ngClass]="api?.status"><span class="status-dot"></span> <span class="status-lbl">{{api?.status}}</span></div>
    </div>

    <div class="overview">
        <store-api-overview [apiOverview]="api"></store-api-overview>
    </div>
    <div class="detail-container">
        <mat-tab-group animationDuration="0ms" disableRipple>
            <mat-tab *ngIf="loggedUser != null" [isActive]="activeTab == 'subscription'">
                <ng-template mat-tab-label>
                    <i class="fa fa-2x fa-folder"></i> Subscriptions
                </ng-template>
                <store-api-app-subscriptions></store-api-app-subscriptions>
            </mat-tab>
            <mat-tab>
                <ng-template mat-tab-label>
                    <i class="fa fa-2x fa-terminal"></i> API Console
                </ng-template>
                <store-api-console></store-api-console>
            </mat-tab>
            <mat-tab>
                <ng-template mat-tab-label>
                    <i class="fa fa-2x fa-file"></i> Documentation
                </ng-template>
                <store-api-documentation></store-api-documentation>
            </mat-tab>
            <mat-tab>
                <ng-template mat-tab-label>
                    <i class="fa fa-2x fa-cube"></i> SDKs
                </ng-template>
                <store-api-sdk></store-api-sdk>
            </mat-tab>
            <mat-tab>
                <ng-template mat-tab-label>
                    <i class="fa fa-2x fa-comment"></i> Forum
                </ng-template>

                <ng-container *ngIf="loggedUser != null; else forumNotLoggedIn">
                    <table class="forum-table" *ngIf="forumResult?.length > 0; else forumNoContent">
                        <tr>
                            <td><strong>Topic</strong></td>
                            <td><strong>Author</strong></td>
                            <td><strong>Date</strong></td>
                            <td><strong>Replies</strong></td>
                        </tr>
                        <tr *ngFor="let forumtopic of forumResult" [routerLink]="['/forum/view', forumtopic.id]">
                            <td>{{forumtopic?.title}}</td>
                            <td>{{forumtopic?.author}}</td>
                            <td>{{forumtopic?.date | date: 'EEEE, MMM d yyyy'}}</td>
                            <td>{{forumtopic?.replyCount}}</td>
                        </tr>
                    </table>

                    <ng-template #forumNoContent>
                        No related discussions found
                    </ng-template>
                </ng-container>
                <ng-template #forumNotLoggedIn>
                    Please <button mat-stroked-button (click)="onLoginClick()">login</button> to see related forum topics
                </ng-template>
            </mat-tab>
        </mat-tab-group>
    </div>
</div>

<div class="similar-apis" *ngIf="similarApis.length > 0">
    <h2>Similar APIs</h2>

    <div class="api-list">

        <div class="api-info" *ngFor="let simapi of similarApis" (click)="similarApiNavigate(simapi.id)">
            <div class="api-icon">
                <img [src]="apiPrefix + api?.thumbnailUri" width="100" *ngIf="api?.thumbnailUri" />
                <img src="assets/images/apigate-a.png" width="100" *ngIf="!api?.thumbnailUri" />
            </div>
            <div class="api-detail-wrap">
                <div class="name-container">{{simapi.name}}</div>
                <div class="info-container">
                    <span>Version : {{simapi.version}}</span>
                    <!-- <span >{{api.provider}}</span> -->
                    <span class="star-rating">
            <star-rating [starType]="'svg'" [rating]="simapi.stars" [hoverEnabled]="true"></star-rating>
          </span>
                </div>
                <div class="clearfix"></div>
            </div>
        </div>

    </div>
    <div class="clearfix"></div>
</div>